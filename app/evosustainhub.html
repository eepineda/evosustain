<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>EvoSustain Platform</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f4f9ff;
      color: #0d47a1;
      margin: 0;
      padding: 2rem;
      line-height: 1.6;
    }
    header {
      text-align: center;
      padding-bottom: 1rem;
      position: relative;
    }
    h1 {
      font-size: 2rem;
      color: #1565c0;
    }
    .lang-switch {
      position: absolute;
      top: 1rem;
      right: 1rem;
    }
    .lang-switch button {
      background: none;
      border: none;
      font-size: 1.2rem;
      cursor: pointer;
      margin-left: 0.5rem;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1.5rem;
      margin-top: 2rem;
    }
    .card {
      background: #e3f2fd;
      padding: 1.5rem;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      transition: transform 0.3s ease;
      text-align: center;
      text-decoration: none;
      color: inherit;
    }
    .card:hover {
      transform: translateY(-4px);
    }
    .cta-section {
      background: #bbdefb;
      padding: 2rem;
      margin-top: 3rem;
      border-radius: 16px;
      text-align: center;
    }
    .cta-button {
      margin-top: 1rem;
      display: inline-block;
      background: #1976d2;
      color: white;
      padding: 0.75rem 1.5rem;
      font-size: 1rem;
      border-radius: 10px;
      text-decoration: none;
    }
    .cta-button:hover {
      background: #0d47a1;
    }
    footer {
      text-align: center;
      margin-top: 3rem;
      font-size: 0.9rem;
      color: #789;
    }
    .lang-es { display: none; }
    #logout-btn {
      position: absolute;
      top: 1rem;
      left: 1rem;
      padding: 0.5rem 1rem;
      border: none;
      background: #d32f2f;
      color: white;
      border-radius: 6px;
      cursor: pointer;
    }
    #logout-btn:hover {
      background: #b71c1c;
    }
    #login-section, #register-section {
      max-width: 400px;
      margin: 2rem auto;
      padding: 2rem;
      background: white;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    input[type="text"], input[type="password"], input[type="email"] {
      width: 100%;
      padding: 0.5rem;
      margin: 0.5rem 0;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    .toggle-link {
      text-align: center;
      margin-top: 1rem;
      cursor: pointer;
      color: #1976d2;
    }
  </style>
  <script>
    const scriptUrl = 'https://script.google.com/macros/s/AKfycbzBD9TGRhsOfgb_nTcIMZ7qRY-uPmsHJsqjvJlkqH8gf-m5FfzcS4R02ZvhbLnUP29Q/exec';

    function toggleLanguage(lang) {
      const enElements = document.querySelectorAll('.lang-en');
      const esElements = document.querySelectorAll('.lang-es');
      if (lang === 'es') {
        enElements.forEach(el => el.style.display = 'none');
        esElements.forEach(el => el.style.display = 'block');
      } else {
        enElements.forEach(el => el.style.display = 'block');
        esElements.forEach(el => el.style.display = 'none');
      }
    }

    function handleLogin(event) {
      event.preventDefault();
      const username = document.getElementById('username').value.trim();
      const password = document.getElementById('password').value.trim();

      fetch(scriptUrl, {
        method: 'POST',
        headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
        body: new URLSearchParams({
          action: 'login',
          username,
          password
        })
      })
      .then(res => res.json())
      .then(data => {
        if (data.status === 'success') {
          localStorage.setItem('loggedInUser', username);
          showMainContent();
        } else {
          alert(data.message || 'Invalid username or password.');
        }
      })
      .catch(() => alert('Error connecting to server. Please try again.'));
    }

    function handleRegister(event) {
      event.preventDefault();
      const name = document.getElementById('reg-name').value.trim();
      const username = document.getElementById('reg-username').value.trim();
      const password = document.getElementById('reg-password').value.trim();
      const email = document.getElementById('reg-email').value.trim();

      fetch(scriptUrl, {
        method: 'POST',
        headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
        body: new URLSearchParams({
          action: 'register',
          name,
          username,
          password,
          email
        })
      })
      .then(res => res.json())
      .then(data => {
        alert(data.message);
        if (data.status === 'success') {
          showLoginForm();
        }
      })
      .catch(() => alert('Error connecting to server. Please try again.'));
    }

    function logout() {
      localStorage.removeItem('loggedInUser');
      location.reload();
    }

    function showLoginForm() {
      document.body.innerHTML = `
        <section id="login-section">
          <h2>Sign In</h2>
          <form onsubmit="handleLogin(event)">
            <input type="text" id="username" placeholder="Username" required />
            <input type="password" id="password" placeholder="Password" required />
            <button type="submit">Sign In</button>
          </form>
          <div class="toggle-link" onclick="showRegisterForm()">Don't have an account? Sign Up</div>
          <div class="lang-switch">
            <button onclick="toggleLanguage('en')"></button>
            <button onclick="toggleLanguage('es')"></button>
          </div>
        </section>
      `;
      toggleLanguage('en');
    }

    function showRegisterForm() {
      document.body.innerHTML = `
        <section id="register-section">
          <h2>Sign Up</h2>
          <form onsubmit="handleRegister(event)">
            <input type="text" id="reg-name" placeholder="Full Name" required />
            <input type="text" id="reg-username" placeholder="Username" required />
            <input type="password" id="reg-password" placeholder="Password" required />
            <input type="email" id="reg-email" placeholder="Email" required />
            <button type="submit">Sign Up</button>
          </form>
          <div class="toggle-link" onclick="showLoginForm()">Already have an account? Sign In</div>
          <div class="lang-switch">
            <button onclick="toggleLanguage('en')"></button>
            <button onclick="toggleLanguage('es')"></button>
          </div>
        </section>
      `;
      toggleLanguage('en');
    }

    function showMainContent() {
      document.body.innerHTML = `
      <button id="logout-btn" onclick="logout()">Sign Off</button>
      <header>
        <a href="https://www.evoford.com" target="_blank">
          <img src="https://www.evoford.com/images/eslogo.png" alt="EvoSustain Logo" style="width:100px;height:100px;border-radius:50%;object-fit:cover;margin-bottom:0.5rem;">
        </a>
        <h1 class="lang-en">EvoSustain Hub</h1>
        <h1 class="lang-es">EvoSustain Hub</h1>
        <p class="lang-en">Explore each module of our sustainability platform:</p>
        <p class="lang-es">Explora cada m贸dulo de nuestra plataforma de sostenibilidad:</p>
        <div class="lang-switch">
          <button onclick="toggleLanguage('en')"></button>
          <button onclick="toggleLanguage('es')"></button>
        </div>
      </header>

      <div class="grid">
        <a href="storesapp.html" class="card">
          <div class="icon"></div>
          <h2>Store App</h2>
          <p class="lang-en">For stores to request and track waste collections, view history, and manage schedules with ease.</p>
          <p class="lang-es">Para tiendas que desean solicitar y rastrear recolecciones, ver historial y gestionar horarios con facilidad.</p>
        </a>
        <a href="businessapp.html" class="card">
          <div class="icon"></div>
          <h2>Business App</h2>
          <p class="lang-en">Mobile app for business managers to monitor pickups, assign routes, and track performance metrics.</p>
          <p class="lang-es">Aplicaci贸n m贸vil para gestores empresariales que supervisan recolecciones, asignan rutas y analizan desempe帽o.</p>
        </a>
        <a href="businessportal.html" class="card">
          <div class="icon">Л</div>
          <h2>Business Admin Portal</h2>
          <p class="lang-en">Advanced web dashboard for full network control, analytics, scheduling, and system configuration.</p>
          <p class="lang-es">Panel web avanzado para control total de red, an谩lisis, programaci贸n y configuraci贸n del sistema.</p>
        </a>
        <a href="driversapp.html" class="card">
          <div class="icon"></div>
          <h2>Driver App</h2>
          <p class="lang-en">Driver-friendly interface for executing assigned routes, logging delays, and reporting collection results.</p>
          <p class="lang-es">Interfaz amigable para conductores que ejecutan rutas, reportan retrasos y registran resultados de recolecci贸n.</p>
        </a>
      </div>

      <div class="cta-section">
        <h2 class="lang-en">Partner with EvoSustain</h2>
        <h2 class="lang-es">Colabora con EvoSustain</h2>
        <p class="lang-en">Join the future of smart waste management. Request a free demo or schedule a personalized consultation.</p>
        <p class="lang-es">nete al futuro de la gesti贸n inteligente de residuos. Solicita una demo gratuita o agenda una consulta personalizada.</p>
        <a href="https://forms.gle/tLet5H1CT4LA1nGf6" 
          target="_blank" 
          class="cta-button lang-en">
          Request Demo
        </a>
        <a href="https://forms.gle/tLet5H1CT4LA1nGf6" 
          target="_blank" 
          class="cta-button lang-es">
          Solicitar Demo
        </a>
      </div>

      <footer>
        <p class="lang-en">EvoSustain Demo Platform &copy; 2025</p>
        <p class="lang-es">Plataforma Demo EvoSustain &copy; 2025</p>
        <div style="margin-top: 1rem;">
          <a href="https://twitter.com/evosustain" target="_blank" style="margin: 0 0.5rem;"></a>
          <a href="https://www.facebook.com/evosustain" target="_blank" style="margin: 0 0.5rem;"> Facebook</a>
          <a href="https://www.instagram.com/evosustain" target="_blank" style="margin: 0 0.5rem;"> Instagram</a>
        </div>
      </footer>
      `;

      toggleLanguage('en');
    }

    window.onload = function () {
      const user = localStorage.getItem('loggedInUser');
      if (!user) {
        showLoginForm();
      } else {
        showMainContent();
      }
    }
  </script>
</head>
<body>
</body>
</html>