---

title: 'QCon New York Day 2: Freeing people, imperfect architecture, lean coffee and
  unanswered questions'
date: '2014-06-13T17:29:00.001+02:00'

tags:
- Events
modified_time: '2014-06-13T17:29:01.751+02:00'
thumbnail: http://lh5.ggpht.com/-VI4_D0Uuv98/U5sYmnqTZ1I/AAAAAAAAKEM/5dMJ59n-rrs/s72-c/clip_image001_thumb%25255B3%25255D.jpg?imgmax=800
blogger_id: tag:blogger.com,1999:blog-15137028.post-8684980258316273847
blogger_orig_url: http://www.continuousimprover.com/2014/06/qcon-new-york-day-2-freeing-people.html
---

<p>That was the weirdest conference party ever. No music, no dancing, just free food and beer. Well, our of me, two Austrian guys and a fellow from Dakota had plenty of great stories to share. And did I mention the free beer? <p><a href="http://lh5.ggpht.com/-IHEqCwzQjoU/U5sYlVLAgaI/AAAAAAAAKEE/HK2cD4LuPpg/s1600-h/clip_image001%25255B6%25255D.jpg"><img title="clip_image001" style="border-top: 0px; border-right: 0px; border-bottom: 0px; float: none; margin-left: auto; border-left: 0px; display: block; margin-right: auto" border="0" alt="clip_image001" src="http://lh5.ggpht.com/-VI4_D0Uuv98/U5sYmnqTZ1I/AAAAAAAAKEM/5dMJ59n-rrs/clip_image001_thumb%25255B3%25255D.jpg?imgmax=800" width="640" height="360"></a> <p><strong>Freeing people and optimizing the tools</strong> <p>As any good professional would do, I also was at the conference venue on time, just like anybody else. And for once, the keynote was worth my time. <a href="http://m.qconnewyork.com/qconnewyork2014/agenda/53982/342381">Dianne Marsh</a>, director of engineering at Netflix shared how Netflix ensures their engineers get the freedom to innovate. Their basic vision is to let free of the people and to optimize the tools. They do that by having their managers provide context rather than control the people and try to attract and retain talent. Obviously engineers have the tendency to go any which way they can, so managers are supposed to help them to have some kind of alignment.  <p>They also should stimulate experimentation in independent paths of exploration. If you've been attending the Lean Enterprise talk from Trevor Owens you should understand why that's such a great thing to do. Next to that they heavily invests in continuous delivery. Developers can test and deploy their own code using a fully automated deployment pipeline. If this involves larger and more risky changes, they do what they call a <a href="http://techblog.netflix.com/2013/08/deploying-netflix-api.html">red/black deployment</a> or <a href="http://www.infoq.com/news/2013/03/canary-release-improve-quality">canary testing</a>. In other words, they run the two versions side-by-side and gradually move our users from the old to new environment.  <p>One other thing that caught my attention is how they approach software development as something that can fail at any time. That’s why they created the <a href="http://techblog.netflix.com/2012/07/chaos-monkey-released-into-wild.html">Chaos Monkey</a> that will shut down random Amazon VMs to see how the system behaves and the <a href="http://techblog.netflix.com/2011/07/netflix-simian-army.html">Latency Monkey</a> that will cause timeouts in network connections at random times. This is pretty special considering how often that day I heard references to that in architectural discussions.  <p><strong>In all seriousness</strong> <p><a href="http://m.qconnewyork.com/qconnewyork2014/agenda/53982/342383">Michael Feathers</a> is one of my hero speakers, not only because of his excellent book, but also because most of his talks are really inspiring. He has spoken about <a href="http://agilecoach.typepad.com/agile-coaching/2012/11/musings-on-conways-law-and-solid-design-principles.html">Conway's Law</a> numerous times, but this was the first one where he used this law to propose organizational solutions. Roughly he said that irrespective of the greatness of your architecture and all the agile practices your applying, sooner or later you'll run into scaling issues caused by the organizational structure. I've been working at a client that grew from 8 to 120 people in about three years and Conway's Law is really visible there. It starts to get particular difficult when you can't get all the developers on the same floor. That's one of the reasons Michael has a great interest in the whole micro-services hype. Since each micro-services can be maintained by at most one team, it provides not only architectural scalability but also on the organizational level.  <p><strong>Embrace Imperfection</strong> <p>Right after Michael, I went to <a href="http://m.qconnewyork.com/qconnewyork2014/agenda/53982/342392">Eric Evans</a>' talk on embracing imperfection. Last year I left his full-day tutorial on Domain-Driven Design because it was too boring, but this session was absolutely great. After admitting he wasn't really sure what architecture really is (!), he talked on our failed attempts to build robust and resilient systems. That's why he believes Netflix is doing such a great job. They've essentially managed to reach perfection in handling imperfection. As a long-term architect that will profoundly affect my future endeavors.  <p>Provided that I understood him correctly, his general rule-of-thumb is that within a bounded context (BC) you should have 90% of the functionality covered by an elegant architecture. The remainder doesn't have to be so perfect, as long as the BC is aligned with the team structure. That ensures that any shortcuts that are taking are well-known within the team and won't surprise other teams. By further decoupling the BCs from each other using special interchange contexts that translate messages between BCs (aka the Anti-corruption Layer), and not sharing any resources such as databases, you can localize the imperfections. Oh, and with that statement of 'not being so perfect', he actually meant to use if-then-else constructs rather than well-designed polymorphostic abstractions! <p><a href="http://lh6.ggpht.com/-NpN6aLy4XW0/U5sYqVu9EFI/AAAAAAAAKEU/LWmf8dA60IY/s1600-h/clip_image002%25255B6%25255D.png"><img title="clip_image002" style="border-top: 0px; border-right: 0px; border-bottom: 0px; float: none; margin-left: auto; border-left: 0px; display: block; margin-right: auto" border="0" alt="clip_image002" src="http://lh4.ggpht.com/-p924ohfVgyM/U5sYsetzETI/AAAAAAAAKEc/Zpp-AU_RmCE/clip_image002_thumb%25255B3%25255D.png?imgmax=800" width="630" height="480"></a> <p><strong>More Eric and Michael</strong> <p>As if this day wasn't already great enough with individual sessions, wouldn't it be cool to have the both of them open up a panel discussion on architecture? Well, here you go. In fact, that panel was joined by <a href="http://m.qconnewyork.com/qconnewyork2014/speakers/53984/1483048">Leo Gorodinski</a> who used <a href="https://twitter.com/gregyoung">Greg Young</a>'s <a href="http://geteventstore.com/">EventStore</a> to build a system in F# and <a href="http://m.qconnewyork.com/qconnewyork2014/speakers/53984/1483047">Duncan DeVore</a> who build an <a href="http://www.slideshare.net/dennisdoomen/cqrs-and-event-sourcing-an-alternative-architecture-for-ddd">Event Sourcing</a> system in Java. Yes, you've heard that right. They were actually discussing Event Sourcing as an architecture principle in the context of micros-services at Qcon. After the session I talked a bit more about that with Leo and Duncan and they told me that Event Sourcing is only recently getting recognition outside the .NET world. Guess I should be proposing a talk on <a href="http://www.slideshare.net/dennisdoomen/building-occasionally-connected-applications-using-event-sourcing">distributed occasionally connected systems using Event Sourcing</a> for next year then. Anyway, one question that was discussed quite extensive is whether domain modeling, or more specific, aggregate boundaries are still useful while developing micro-services. I couldn't judge the later, but in the context of event sourcing I shared my experience that having proper aggregates allowed us to move from a traditional relation database system to Event Sourcing without too much of a hassle. However, I also shared that Event Sourcing is not a silver bullet and you should be prepared to the need to learn a lot of new technical and functional concepts.  <p><strong>Lean Coffee</strong> <p>To stay within the context of the architecture panel discussion, I attended a Lean Coffee session on improving architecture. Lean Coffee is a simplified version of Open Space where people can propose topics that are openly discussed for a maximum of 5 minutes in the order defined by dot voting. I even asked Eric, Leo and Duncan to stick around for this talk because there were a lot of questions after their session.  <p><a href="http://lh4.ggpht.com/-YgLg3a7NIa0/U5sYtddTNRI/AAAAAAAAKEk/cZqHVwXnxPU/s1600-h/clip_image003%25255B6%25255D.jpg"><img title="clip_image003" style="border-top: 0px; border-right: 0px; border-bottom: 0px; float: none; margin-left: auto; border-left: 0px; display: block; margin-right: auto" border="0" alt="clip_image003" src="http://lh6.ggpht.com/-umf1aix4x5c/U5sYuvqcfXI/AAAAAAAAKEs/H8oBPDvhuXM/clip_image003_thumb%25255B3%25255D.jpg?imgmax=800" width="640" height="360"></a> <p>Since 5 minutes is short, we covered several topics: <p><em>How to handle exceptions in an event-based architecture; </em>After a short discussion we learned the attendee meant a command-based architecture. Somebody proposed to have a callback REST API that command handlers can report errors to. Others proposed to associate each command/event with a correlation ID and have some framework in place for registering errors. I myself proposed to validate the command for correctness synchronously and handle any business errors asynchronously through a centralized registry, but keeping the errors really functional.  <p><em>How to compose micro-services from aggregates and how to select the right size and maintaining micro-services</em>; Talking about awkward silence, this was one. Nobody in the group had the experience nor got anything from the QCon sessions that could answer this. Bummer… <p><em>What else are people talking about EXCEPT micro-services</em>; Since I'm working with an Event Sourcing architecture and this was also discussed in the previous panel discussion I shared some of our trials and tribulations of moving from a traditional architecture to ES.  <p><em>Usual stuff you do to improve architecture and how to visualize and/or measure this</em>; Most of us mentioned the SOLID principles, reducing technical debt, pair programming and code reviews, but we couldn't entirely agree on DRY. Some of us thought DRY within a component or bounded context is important but outside that boundary is not too important. This especially aligns well with Conway's Law because preventing duplication between teams is a lot more difficult or even undesirable. However, not everybody agreed with that. <p><strong>Six questions on micro-services I hoped to get answered, but didn't</strong> <p>So after two days of architecture sessions and discussions, I still have a lot of questions unanswered… <ul> <li>How to group aggregates in micro-services?</li> <li>How do you prevent a micro-services from growing too quickly and becoming macro?</li> <li>Should micro-services call eachother or should they publish events only?</li> <li>How do you version messages to be both backwards compatible as well as forwards compatible?</li> <li>How do you manage the dependencies between the services?</li> <li>How do you effectively aggregate data from multiple services to prevent N+1 calls?</li></ul> <p>Anybody??</p>  